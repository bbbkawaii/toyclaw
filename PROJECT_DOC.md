# ToyBridge AI 项目文档

## 一、项目背景

中国是全球最大的玩具制造国，年出口额超过 400 亿美元。然而，大量中小型玩具工厂在拓展海外市场时，长期面临以下核心痛点：

**文化壁垒** — 不同国家和地区对玩具的审美偏好、颜色寓意、形象禁忌、节日主题差异显著。一款在国内畅销的玩具，直接出口到中东市场可能因颜色或造型触犯文化禁忌而滞销；出口到日韩市场可能因风格不符当地审美而缺乏竞争力。传统方式依赖个人经验和零散的市场反馈，遗漏风险高，试错代价大。

**改款成本高** — 玩具出海通常需要针对不同目标市场做外观、配色、包装的本地化调整。传统流程依赖设计师反复打样、多轮沟通，一个市场的改款周期往往长达数周，中小企业难以为每个目标市场单独投入设计资源，导致产品同质化严重。

**市场洞察缺失** — 工厂老板和外贸经理缺乏海外目标市场的一手数据，难以了解当地的节日热点、竞品风格趋势、消费者审美偏好和热销品类，导致产品定位模糊、错失季节性销售窗口，参展前拿不出有针对性的差异化产品方案。

**语言障碍** — 海外沟通、描述产品卖点、撰写询盘邮件等场景中，语言障碍增加了大量沟通成本，影响成交效率。

**合规风险** — 不同出口目的地有不同的玩具安全标准（如欧盟 CE/EN71、美国 ASTM F963、日本 ST），材料安全、年龄分级、标签要求等合规门槛复杂，稍有疏忽可能导致货物被扣押、退运甚至召回。

ToyBridge AI 正是为解决这些痛点而生——通过多模态人工智能技术，将原本需要数周的改款调研流程压缩到数分钟，让每一家中小玩具工厂都能以极低成本获得专业级的出海改款方案。

## 二、产品目标

| 目标类型 | 具体描述 |
|---|---|
| **业务目标** | 帮助玩具工厂老板降低海外市场拓展成本，提升产品本地化竞争力，缩短从选品到参展/上架的准备周期 |
| **用户目标** | 上传一张玩具图片，选择目标市场，快速获得针对该市场的改款建议、配色方案、包装设计、AI 预览图及合规指引 |
| **技术目标** | 构建多模态 AI Agent，融合图像识别、文化知识库、生成式设计、RAG 合规检索等能力，实现全流程自动化 |
| **商业目标** | 以 SaaS 模式服务玩具出海企业，按分析次数或订阅计费，未来扩展至更多消费品品类 |

## 三、用户画像

### 3.1 核心用户

- **角色**：玩具工厂老板 / 外贸经理 / 产品经理
- **地区**：广东、浙江、福建等制造业集中区域
- **企业规模**：中小型玩具工厂（10～500 人）

### 3.2 用户诉求

- 产品快速适配海外目标市场，缩短改款周期
- 降低与设计师的沟通成本，减少打样次数
- 了解目标国文化偏好、节日热点与合规要求
- 参展前快速生成差异化产品方案和可视化效果图
- 获得多语言的产品描述和卖点文案

### 3.3 用户痛点

- 不懂海外文化，改款靠猜，经常踩坑
- 设计师改稿周期长达数周，错过销售窗口
- 参展前没有差异化产品方案，同质化严重
- 合规要求复杂，不确定产品能否顺利清关
- 询盘邮件和产品描述需要找人翻译，效率低

## 四、解决方案

### 4.1 核心理念

**「一张图片，一键出海」** — 用户只需上传一张玩具图片并选择目标市场，ToyBridge AI 即可自动完成从特征提取、文化风险评估到改款建议生成的全链路分析，输出可直接用于决策的可视化方案。

### 4.2 价值主张

| 传统方式 | ToyBridge AI |
|---|---|
| 设计师人工调研目标市场，周期 2～4 周 | AI 自动分析，数分钟出结果 |
| 依赖个人经验判断文化风险，遗漏率高 | 系统化知识库匹配，覆盖主要文化禁忌 |
| 改款方案靠文字描述，难以直观呈现 | AI 生成改款预览图和三视图，所见即所得 |
| 每个市场单独投入设计成本 | 一次上传，多市场对比分析 |
| 合规要求人工查阅标准文档 | RAG 智能检索，自动生成合规评估报告 |
| 配色方案缺乏市场依据 | 基于文化偏好、节日主题、竞品差异的策略性配色 |

### 4.3 产品工作流程

```
用户上传玩具图片 + 选择改款方向
        │
        ▼
  ┌─────────────┐
  │  图像特征提取  │  AI 视觉分析：形状/颜色/材质/风格
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │  选择目标市场  │  美国 / 欧洲 / 中东 / 东南亚 / 日韩
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │  跨文化分析   │  禁忌检测 → 节日匹配 → 竞品参考
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │  改款建议生成  │  配色方案 → 造型调整 → 包装建议
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │  AI 资产输出  │  预览图 / 三视图 / 视频脚本
  └──────┬──────┘
         │
         ▼
  ┌─────────────┐
  │  合规评估     │  认证清单 / 材料安全 / 年龄分级
  └─────────────┘
```

## 五、功能架构

```
ToyBridge AI
│
├── 📸 图像输入模块                          ✅ 已实现
│     ├── 玩具图片上传（JPG/PNG/WebP，最大 10MB）
│     ├── 改款方向输入（自由文本 / 预设：换色、季节主题、加配件）
│     ├── 图像预处理优化（缩放、压缩、格式转换）
│     └── AI 图像特征提取（形状/颜色/材质/风格）+ 本地兜底
│
├── 🌍 跨文化分析模块                        ✅ 已实现
│     ├── 目标市场选择（美国/欧洲/中东/东南亚/日韩）
│     ├── 文化禁忌检测（风险分级 + 调整建议）
│     ├── 节日/热点主题匹配（Top 3 推荐）
│     └── 竞品风格参考（差异化机会点）
│
├── 🎨 改款建议模块                          ✅ 已实现
│     ├── 配色方案建议（3 套策略：核心色/营销色/差异色）
│     ├── 造型/细节调整建议（优先级排序，最多 4 项）
│     ├── 包装风格建议（市场定制化方案）
│     └── AI 资产生成
│           ├── 改款预览图（Gemini 图像生成）
│           ├── 三视图（正面/侧面/背面，视角一致性保证）
│           └── 展示视频脚本（文字版）
│
├── 📋 合规与认证模块                        ✅ 已实现（可选）
│     ├── 目标市场认证清单（CE/ASTM/EN71 等）
│     ├── 材料安全提示
│     ├── 年龄分级建议
│     └── RAG 合规文档检索 + AI 评估报告
│
├── 💬 销售赋能模块                          📋 规划中
│     ├── 多语言产品描述生成
│     ├── 卖点提炼与标语（Slogan）生成
│     └── 询盘/邮件模板生成
│
└── 📊 市场洞察模块                          📋 规划中
      ├── 目标市场玩具趋势报告
      ├── 热销品类分析
      └── 定价区间参考
```

## 六、已实现功能详解

### 6.1 图像输入与特征提取

系统接收用户上传的玩具图片，自动完成预处理和 AI 特征提取。

- **图片上传**：支持 JPG / PNG / WebP 格式，最大 10MB，系统自动缩放至 768px 并转为 WebP 格式以降低 AI 推理成本
- **改款方向**：用户可选择自由文本描述改款意图，或使用预设方向（换色 `CHANGE_COLOR`、季节主题 `SEASONAL_THEME`、添加配件 `ADD_ACCESSORY`），系统据此引导后续分析
- **AI 特征提取**：调用多模态视觉 AI（Gemini / OpenAI / Sophnet 可切换），从图像中提取四维特征——形状、颜色（含 HEX 值）、材质、风格
- **本地兜底**：当 AI 提供商不可用时，系统自动切换至本地启发式提取（Sharp 像素采样 + 色彩量化），确保服务不中断

### 6.2 跨文化分析

基于内置的全球文化知识库，对产品特征进行市场适配性评估。

- **文化禁忌检测**：将产品的颜色、材质、造型特征与目标市场的禁忌规则逐一匹配，输出风险等级（高/中/低）、具体证据、风险描述及调整建议。例如检测到产品使用绿色出口至某市场时，系统会提示该颜色在当地文化中的特殊含义
- **节日主题匹配**：根据目标市场的节日日历，通过关键词命中率、色彩重叠度、改款方向提示等维度综合评分，推荐最相关的 Top 3 季节性主题，帮助企业精准蹭热点
- **竞品风格参考**：匹配目标市场的主流竞品风格原型，评估产品与竞品的相似度和差异点，发现差异化机会

### 6.3 改款建议

综合图像特征和文化分析结果，输出可执行的改款方案。

- **策略性配色**：每个市场生成 3 套配色方案，各有明确的市场定位
  - 「市场适配核心色」— 贴近当地消费者主流偏好的安全色系
  - 「季节营销色」— 结合当季节日主题的应景配色
  - 「差异化货架色」— 与竞品形成视觉区分的亮眼配色
- **造型调整**：最多 4 项按优先级排序的调整建议，分别对应禁忌规避、季节机会、竞品差异化、品质感提升
- **包装设计**：根据市场特点推荐定制化包装方案（如美国「零售货架英雄盒」、欧洲「环保极简纸盒」、日韩「精密开窗盒」）
- **AI 资产生成**：
  - 改款预览图 — 调用 Gemini 图像生成 API，基于改款建议渲染 2D 效果图
  - 三视图（正/侧/背）— 以预览图为参考保证视角一致性
  - 展示视频脚本 — 文字版视频拍摄方案（视频生成能力规划中）
- **资产重试**：单个资产失败可独立重试，无需重跑整个流程

### 6.4 合规与认证（可选模块）

基于 RAG（检索增强生成）架构，自动化合规评估。

- 预先将各国玩具安全标准 PDF（CE、ASTM F963、EN71 等）切分为文本块并向量化，存储为本地索引
- 运行时通过 Gemini Embedding 对用户产品进行语义检索，匹配最相关的合规条款
- 将检索到的合规片段发送至 Gemini LLM，生成结构化评估报告，涵盖材料安全、年龄分级、标签要求等
- 系统启动时自动检测模块就绪状态，前端动态展示/隐藏合规入口

### 6.5 项目历史与仪表盘

- 所有分析记录自动持久化，支持分页浏览历史项目
- 详情页完整展示流水线全部结果，方便回溯对比

## 七、技术实现

### 7.1 系统架构

前后端分离架构，后端提供 RESTful API，前端为 React SPA。核心业务为三步顺序流水线，每步结果通过 ID 串联：

```
图像输入 (requestId) → 跨文化分析 (analysisId) → 改款建议 (suggestionId)
```

### 7.2 技术栈

**后端**

| 技术 | 用途 |
|---|---|
| Node.js + Fastify 5 | HTTP 服务框架 |
| TypeScript (strict) | 类型安全 |
| Prisma 6 + SQLite | ORM 与数据库 |
| Zod | 请求/响应校验 |
| Sharp | 图像预处理与本地特征提取 |
| pdf-parse | 合规文档解析 |

**前端**

| 技术 | 用途 |
|---|---|
| React 19 + Vite 7 | UI 框架与构建工具 |
| Tailwind CSS 3.4 | 样式系统（自定义主题色） |
| Zustand 5 | 状态管理 |
| React Router 7 | 路由与懒加载 |
| React Hook Form + Zod | 表单校验 |
| Framer Motion | 动画交互 |

### 7.3 AI 多 Provider 架构

系统采用统一接口的多 Provider 架构，便于扩展和切换 AI 供应商：

| 能力 | 可用 Provider | 备注 |
|---|---|---|
| 视觉分析 | Gemini / OpenAI / Sophnet | 通过 `VISION_PROVIDER` 环境变量切换 |
| 图像生成 | Gemini | 用于改款预览图和三视图 |
| 文本嵌入 | Gemini | 用于合规文档 RAG 检索 |
| 合规评估 | Gemini | 基于检索结果生成评估报告 |

所有 Provider 遵循统一接口规范（`VisionProvider` / `ImageGenerationProvider` / `EmbeddingProvider`），新增 Provider 只需实现对应接口即可。

### 7.4 数据模型

```
AnalysisRequest (核心实体，一次分析的起点)
├── AnalysisResult (1:1, 图像特征提取结果)
├── CrossCulturalAnalysis[] (1:N, 按目标市场)
│   └── RedesignSuggestion[] (1:N, 改款建议)
└── ComplianceAssessment[] (1:N, 合规评估)
```

### 7.5 关键技术亮点

- **本地兜底机制**：AI Provider 异常时，通过 Sharp 像素采样 + HSL 色彩量化 + 长宽比推断等本地算法完成基础特征提取，保障服务可用性
- **RAG 合规检索**：将合规标准文档离线向量化，运行时进行语义相似度检索，再由 LLM 综合分析，兼顾准确性与时效性
- **资产独立重试**：图像生成任务解耦为独立单元，失败资产可单独重试，避免重复计算
- **动态能力检测**：后端通过 `/api/v1/capabilities` 暴露功能开关，前端自适应展示/隐藏模块，实现渐进式功能上线
- **图像优化流水线**：上传图片经缩放、格式转换、质量压缩后再送入 AI 推理，平衡识别质量与推理成本

## 八、商业化方向

### 8.1 商业模式

| 模式 | 描述 |
|---|---|
| **免费体验** | 每月有限次免费分析额度，降低用户试用门槛 |
| **按次计费** | 单次完整分析（图像提取 + 文化分析 + 改款建议 + 资产生成）按次收费，适合低频用户 |
| **订阅制** | 月度/年度订阅，不限分析次数，适合频繁迭代产品线的企业 |
| **企业定制** | 为大型贸易商或品牌方提供私有化部署、定制知识库、API 集成等高级服务 |

### 8.2 目标市场规模

- **直接目标**：中国玩具出口企业——广东、浙江、福建等产业集群，数万家中小工厂
- **扩展目标**：其他消费品出海企业（家居、文具、礼品等），复用跨文化分析和改款建议能力
- **远期目标**：海外本土玩具品牌的本地化设计辅助工具

### 8.3 竞争优势

| 维度 | ToyBridge AI | 传统设计外包 | 通用 AI 工具 |
|---|---|---|---|
| 成本 | 极低（AI 自动化） | 高（设计师人工费） | 低 |
| 速度 | 分钟级 | 数周 | 分钟级 |
| 文化适配 | 内置专业知识库 | 依赖设计师经验 | 无专业知识 |
| 合规能力 | RAG 自动检索 | 需另聘顾问 | 无 |
| 行业针对性 | 玩具行业深度定制 | 通用设计服务 | 通用工具 |
| 可视化产出 | AI 预览图 + 三视图 | 设计稿 | 通用图片 |

### 8.4 收入增长路径

```
Phase 1 (当前)          Phase 2                  Phase 3
核心改款功能            扩展增值模块              平台化
─────────────          ─────────────            ─────────────
• 图像分析              • 销售赋能模块            • 开放 API 生态
• 跨文化分析            • 市场洞察模块            • 供应链对接
• 改款建议              • 多语言支持              • 展会方案打包
• 合规评估              • 批量分析能力            • 品类横向扩展
```

## 九、规划中功能

### 9.1 销售赋能模块

帮助用户将改款后的产品快速推向海外市场：

- **多语言产品描述生成**：根据产品特征和改款卖点，自动生成目标市场语言的产品描述
- **卖点提炼与标语生成**：结合文化分析结果，提炼本地化的产品卖点和营销标语
- **询盘/邮件模板生成**：生成针对不同市场的外贸沟通模板，降低语言障碍

### 9.2 市场洞察模块

为用户提供目标市场的数据支撑：

- **玩具趋势报告**：整合外部数据源，输出目标市场的近期玩具趋势分析
- **热销品类分析**：分析目标市场当季热销玩具品类和风格趋势
- **定价区间参考**：提供目标市场同类产品的定价区间数据，辅助定价决策
